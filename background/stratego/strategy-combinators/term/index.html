
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Spoofax language workbench">
      
      
        <meta name="author" content="Spoofax Team">
      
      
        <link rel="canonical" href="https://www.spoofax.dev/background/stratego/strategy-combinators/term/">
      
      
        <link rel="prev" href="../sequential/">
      
      
        <link rel="next" href="../traversal/">
      
      <link rel="icon" href="../../../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.4">
    
    
      
        <title>Term Combinators - Spoofax</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.9c788c91.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/styles.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<!-- Determine title -->

<!-- prettier-ignore -->






<!-- Open graph meta tags -->
<meta property="og:type" content="website" />
<meta property="og:title" content="Spoofax - Term Combinators" />
<meta property="og:description" content="Spoofax language workbench" />
<meta property="og:url" content="https://www.spoofax.dev/background/stratego/strategy-combinators/term/" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/373448219/bb3bb300-d8ee-11eb-9991-a5080ae2657c" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1080" />
<meta property="og:image:height" content="568" />


  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="spoofax" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#term-combinators" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!-- Header -->
<header class="md-header" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label=""
  >

    <!-- Link to home -->
    <a
      href="../../../.."
      title="Spoofax"
      class="md-header__button md-logo"
      aria-label="Spoofax"
      data-md-component="logo"
    >
      
  <img src="../../../../assets/logo.svg" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <a 
            href="../../../.."
            title="Spoofax"
            class="md-ellipsis"
            aria-label="Spoofax"
          >
            Spoofax
          </a>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Term Combinators
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette -->
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input
            class="md-option"
            data-md-color-media="(prefers-color-scheme: light)"
            data-md-color-scheme="spoofax"
            data-md-color-primary=""
            data-md-color-accent=""
            
              aria-label="Switch to dark mode"
            
            type="radio"
            name="__palette"
            id="__palette_1"
          />
          
            <label
              class="md-header__button md-icon"
              title="Switch to dark mode"
              for="__palette_2"
              hidden
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          <input
            class="md-option"
            data-md-color-media="(prefers-color-scheme: dark)"
            data-md-color-scheme="slate"
            data-md-color-primary=""
            data-md-color-accent=""
            
              aria-label="Switch to light mode"
            
            type="radio"
            name="__palette"
            id="__palette_2"
          />
          
            <label
              class="md-header__button md-icon"
              title="Switch to light mode"
              for="__palette_1"
              hidden
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/metaborg/spoofax" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    spoofax
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../tutorials/" class="md-tabs__link">
        Tutorials
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../howtos/" class="md-tabs__link">
        How-Tos
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../references/" class="md-tabs__link">
        References
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../" class="md-tabs__link md-tabs__link--active">
        Background
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../support/" class="md-tabs__link">
        Support
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../release/stable/" class="md-tabs__link">
        Releases
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Spoofax" class="md-nav__button md-logo" aria-label="Spoofax" data-md-component="logo">
      
  <img src="../../../../assets/logo.svg" alt="logo">

    </a>
    Spoofax
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/metaborg/spoofax" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    spoofax
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../..">Home</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Home" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Home
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/" class="md-nav__link">
        Getting started
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../tutorials/">Tutorials</a>
          
        </div>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../howtos/">How-Tos</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="How-Tos" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          How-Tos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_2" tabindex="0" aria-expanded="false">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/installation/install-eclipse-bundle/" class="md-nav__link">
        Install the Eclipse with Spoofax Plugin Bundle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/installation/install-eclipse-plugin-manually/" class="md-nav__link">
        Install the Spoofax Eclipse Plugin Manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/installation/install-from-source/" class="md-nav__link">
        Install Spoofax from Source
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_3" tabindex="0" aria-expanded="false">
          Static Semantics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Static Semantics" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Static Semantics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/statix/debugging/" class="md-nav__link">
        Debugging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/statix/migrating-from-nabl2/" class="md-nav__link">
        Migrate from NaBL2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/statix/migrating-to-concurrent-solver/" class="md-nav__link">
        Migrating to the Concurrent Solver
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/statix/signature-generator/" class="md-nav__link">
        Signature Generator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3_4" type="checkbox" id="__nav_3_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_4" tabindex="0" aria-expanded="false">
          Transformation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Transformation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Transformation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/generate-signature/" class="md-nav__link">
        How to Generate a Stratego Signature
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/run-stratego-programs/" class="md-nav__link">
        How to Run Stratego Programs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/generate-pretty-printer/" class="md-nav__link">
        How to Generate a Pretty-Printer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/debug-stratego/" class="md-nav__link">
        Debug Stratego Programs
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/concrete-syntax/" class="md-nav__link">
        Concrete Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/exchange-terms/" class="md-nav__link">
        Exchange Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/inspect-terms/" class="md-nav__link">
        Inspect Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/stratego/stratego-1-to-2/" class="md-nav__link">
        Migrating from Stratego 1 to Stratego 2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3_5" type="checkbox" id="__nav_3_5" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_5" tabindex="0" aria-expanded="false">
          Editor Services
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Editor Services" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_5">
          <span class="md-nav__icon md-icon"></span>
          Editor Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/editor-services/rename-refactoring/" class="md-nav__link">
        Add Rename Refactoring to an Existing Project
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../howtos/development/">Development</a>
          
            <label for="__nav_3_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Development" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/requirements/" class="md-nav__link">
        Requirements
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/maven/" class="md-nav__link">
        Maven
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/building/" class="md-nav__link">
        Building
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/developing/" class="md-nav__link">
        Developing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/releasing/" class="md-nav__link">
        Releasing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../howtos/development/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/">References</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="References" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/config/">Configuration</a>
          
            <label for="__nav_4_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/config/language/" class="md-nav__link">
        Language Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/config/project/" class="md-nav__link">
        Project Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_3" type="checkbox" id="__nav_4_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/syntax/">Syntax</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Syntax" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Syntax
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/symbols/" class="md-nav__link">
        Symbols
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/productions/" class="md-nav__link">
        Productions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/lexical-syntax/" class="md-nav__link">
        Lexical Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/context-free-syntax/" class="md-nav__link">
        Context-Free Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/kernel-syntax/" class="md-nav__link">
        Kernel Syntax
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/start-symbols/" class="md-nav__link">
        Start Symbols
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/disambiguation/" class="md-nav__link">
        Disambiguation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/layout-sensitivity/" class="md-nav__link">
        Layout Sensitivity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/recovery/" class="md-nav__link">
        Recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/syntax/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/statix/">Static Semantics</a>
          
            <label for="__nav_4_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Static Semantics" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Static Semantics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/concepts/" class="md-nav__link">
        Language Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/terms/" class="md-nav__link">
        Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/basic-constraints/" class="md-nav__link">
        Basic Constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/rules/" class="md-nav__link">
        Rules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/scope-graphs/" class="md-nav__link">
        Scope Graph Constraints
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/queries/" class="md-nav__link">
        Queries
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/tests/" class="md-nav__link">
        Tests
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/statix/stratego-api/" class="md-nav__link">
        Stratego API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/flowspec/">Data Flow Analysis</a>
          
            <label for="__nav_4_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Data Flow Analysis" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Data Flow Analysis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/flowspec/structure/" class="md-nav__link">
        Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/flowspec/Stratego_API/" class="md-nav__link">
        Stratego API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/flowspec/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/flowspec/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/flowspec/references/" class="md-nav__link">
        References
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/stratego/">Transformation</a>
          
            <label for="__nav_4_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Transformation" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          Transformation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/lexical/" class="md-nav__link">
        Lexical
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/modules/" class="md-nav__link">
        Modules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/terms/" class="md-nav__link">
        Terms
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/rewrite-rules/" class="md-nav__link">
        Rewrite Rules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/strategy-definitions/" class="md-nav__link">
        Strategy Definitions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/strategy-combinators/" class="md-nav__link">
        Strategy Combinators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/dynamic-rules/" class="md-nav__link">
        Dynamic Rules
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/stratego/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/testing/">Testing</a>
          
            <label for="__nav_4_7">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/testing/test-suites/" class="md-nav__link">
        Test suites
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/testing/test-expectations/" class="md-nav__link">
        Test Expectations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/testing/running-tests/" class="md-nav__link">
        Running SPT Tests
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_8" type="checkbox" id="__nav_4_8" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/editor-services/">Editor Services</a>
          
            <label for="__nav_4_8">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Editor Services" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_8">
          <span class="md-nav__icon md-icon"></span>
          Editor Services
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/esv/" class="md-nav__link">
        ESV
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/analysis/" class="md-nav__link">
        Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/file-extensions/" class="md-nav__link">
        Language File Extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/hover/" class="md-nav__link">
        Hover Tooltips
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/menus/" class="md-nav__link">
        Action Menus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/on-save/" class="md-nav__link">
        On-Save Handlers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/outline/" class="md-nav__link">
        Outline View
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/parsing/" class="md-nav__link">
        Parsing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/reference-resolution/" class="md-nav__link">
        Reference Resolution
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/renaming/" class="md-nav__link">
        Rename Refactoring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/stratego/" class="md-nav__link">
        Stratego
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/editor-services/syntax-highlighting/" class="md-nav__link">
        Syntax Highlighting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_4_9" type="checkbox" id="__nav_4_9" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../references/pipelines/">Pipelines</a>
          
            <label for="__nav_4_9">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Pipelines" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          Pipelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/modules/" class="md-nav__link">
        Module system
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/types/" class="md-nav__link">
        Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/generics/" class="md-nav__link">
        Generics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/functions/" class="md-nav__link">
        Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/expressions/" class="md-nav__link">
        Expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../references/pipelines/limitations/" class="md-nav__link">
        Known bugs and limitations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../">Background</a>
          
            <label for="__nav_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Background" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Background
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_2" type="checkbox" id="__nav_5_2" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../bibliography/">Bibliography</a>
          
            <label for="__nav_5_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Bibliography" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_2">
          <span class="md-nav__icon md-icon"></span>
          Bibliography
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../bibliography/sdf3/" class="md-nav__link">
        An SDF3 Bibliography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../bibliography/statix/" class="md-nav__link">
        A Statix Bibliography
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../bibliography/stratego/" class="md-nav__link">
        A Stratego Bibliography
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_3" type="checkbox" id="__nav_5_3" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../statix/">Static Semantics</a>
          
            <label for="__nav_5_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Static Semantics" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_3">
          <span class="md-nav__icon md-icon"></span>
          Static Semantics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../statix/rule-selection/" class="md-nav__link">
        The Semantics of Rule Selection
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_4" type="checkbox" id="__nav_5_4" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">Transformations</a>
          
            <label for="__nav_5_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Transformations" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_4">
          <span class="md-nav__icon md-icon"></span>
          Transformations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_4_2" type="checkbox" id="__nav_5_4_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_4_2" tabindex="0" aria-expanded="false">
          Strategic Rewriting
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Strategic Rewriting" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_2">
          <span class="md-nav__icon md-icon"></span>
          Strategic Rewriting
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../strategic-rewriting/term-rewriting/" class="md-nav__link">
        Term Rewriting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../strategic-rewriting/limitations-of-rewriting/" class="md-nav__link">
        Limitations of Rewriting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../strategic-rewriting/traversal-with-rules/" class="md-nav__link">
        Factoring out Traversal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../strategic-rewriting/strategic-rewriting/" class="md-nav__link">
        Strategic Rewriting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_4_3" type="checkbox" id="__nav_5_4_3" checked>
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_4_3" tabindex="0" aria-expanded="true">
          Strategy Combinators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Strategy Combinators" data-md-level="3">
        <label class="md-nav__title" for="__nav_5_4_3">
          <span class="md-nav__icon md-icon"></span>
          Strategy Combinators
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../sequential/" class="md-nav__link">
        Sequential Combinators
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Term Combinators
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Term Combinators
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-terms" class="md-nav__link">
    Building Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-terms" class="md-nav__link">
    Matching Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementing-rewrite-rules" class="md-nav__link">
    Implementing Rewrite Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anonymous-rewrite-rule" class="md-nav__link">
    Anonymous Rewrite Rule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-variable-scope" class="md-nav__link">
    Term variable scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implicit-variable-scope" class="md-nav__link">
    Implicit Variable Scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where" class="md-nav__link">
    Where
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-rewrite-rules" class="md-nav__link">
    Conditional Rewrite Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda-rules" class="md-nav__link">
    Lambda Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apply-and-match" class="md-nav__link">
    Apply and Match
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-strategies-in-build" class="md-nav__link">
    Applying Strategies in Build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-values" class="md-nav__link">
    Auxiliary Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment" class="md-nav__link">
    Assignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-wrap" class="md-nav__link">
    Term Wrap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-project" class="md-nav__link">
    Term Project
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../traversal/" class="md-nav__link">
        Traversal Combinators
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../type-unifying/" class="md-nav__link">
        Type Unifying Traversal
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../origin-tracking/" class="md-nav__link">
        Origin Tracking
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../documentation/">Documentation</a>
          
            <label for="__nav_5_5">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/pages/" class="md-nav__link">
        Adding Pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/links/" class="md-nav__link">
        Links
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/code-highlighting/" class="md-nav__link">
        Code Highlighting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/guis-and-menus/" class="md-nav__link">
        GUIs and Menus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/citations/" class="md-nav__link">
        Citations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/structure/" class="md-nav__link">
        Structure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../documentation/troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
        
          
            
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../support/">Support</a>
          
            <label for="__nav_6">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Support" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Support
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../support/contributions/" class="md-nav__link">
        Contributions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" tabindex="0" aria-expanded="false">
          Releases
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Releases" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Releases
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/stable/" class="md-nav__link">
        Stable Releases
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/develop/" class="md-nav__link">
        Development Releases
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_3" tabindex="0" aria-expanded="false">
          Release Notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Release Notes" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Release Notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.18/" class="md-nav__link">
        Spoofax 2.5.18 (14-11-2022)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.17/" class="md-nav__link">
        Spoofax 2.5.17 (06-07-2022)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.16/" class="md-nav__link">
        Spoofax 2.5.16 (04-06-2021)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.15/" class="md-nav__link">
        Spoofax 2.5.15 (11-05-2021)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.14/" class="md-nav__link">
        Spoofax 2.5.14 (16-12-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.13/" class="md-nav__link">
        Spoofax 2.5.13 (20-11-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.12/" class="md-nav__link">
        Spoofax 2.5.12 (08-10-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.11/" class="md-nav__link">
        Spoofax 2.5.11 (17-07-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.10/" class="md-nav__link">
        Spoofax 2.5.10 (07-07-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.9/" class="md-nav__link">
        Spoofax 2.5.9 (08-05-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.8/" class="md-nav__link">
        Spoofax 2.5.8 (28-04-2020)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.7/" class="md-nav__link">
        Spoofax 2.5.7 (26-06-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.6/" class="md-nav__link">
        Spoofax 2.5.6 (24-05-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.5/" class="md-nav__link">
        Spoofax 2.5.5 (23-05-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.4/" class="md-nav__link">
        Spoofax 2.5.4 (08-05-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.3/" class="md-nav__link">
        Spoofax 2.5.3 (02-05-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.2/" class="md-nav__link">
        Spoofax 2.5.2 (12-03-2019)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.1/" class="md-nav__link">
        Spoofax 2.5.1 (02-10-2018)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.5.0/" class="md-nav__link">
        Spoofax 2.5.0 (11-09-2018)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.4.1/" class="md-nav__link">
        Spoofax 2.4.1 (29-01-2018)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.4.0/" class="md-nav__link">
        Spoofax 2.4.0 (09-01-2018)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.3.0/" class="md-nav__link">
        Spoofax 2.3.0 (29-09-2017)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.2.1/" class="md-nav__link">
        Spoofax 2.2.1 (04-05-2017)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.2.0/" class="md-nav__link">
        Spoofax 2.2.0 (18-04-2017)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.1.0/" class="md-nav__link">
        Spoofax 2.1.0 (10-01-2017)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.0.0/" class="md-nav__link">
        Spoofax 2.0.0 (08-07-2016)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/2.0.0-beta1/" class="md-nav__link">
        Spoofax 2.0.0-beta1 (07-04-2016)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.5.0/" class="md-nav__link">
        Spoofax 1.5.0 (18-12-2015)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.4.0/" class="md-nav__link">
        Spoofax 1.4.0 (06-03-2015)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.3.1/" class="md-nav__link">
        Spoofax 1.3.1 (09-12-2014)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.3.0/" class="md-nav__link">
        Spoofax 1.3.0 (12-11-2014)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.2.0/" class="md-nav__link">
        Spoofax 1.2.0 (13-08-2014)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.1.0/" class="md-nav__link">
        Spoofax 1.1.0 (25-03-2013)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.0.2/" class="md-nav__link">
        Spoofax 1.0.2 (15-02-2012)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/1.0.0/" class="md-nav__link">
        Spoofax 1.0.0 (28-12-2011)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/note/vnext/" class="md-nav__link">
        Spoofax vNext
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_7_4" type="checkbox" id="__nav_7_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_4" tabindex="0" aria-expanded="false">
          Migration Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Migration Guides" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_4">
          <span class="md-nav__icon md-icon"></span>
          Migration Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/2.5.15/" class="md-nav__link">
        Spoofax 2.5.15 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/2.5.10/" class="md-nav__link">
        Spoofax 2.5.10 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/2.5.5/" class="md-nav__link">
        Spoofax 2.5.5 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/2.1.0/" class="md-nav__link">
        Spoofax 2.1.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/2.0.0/" class="md-nav__link">
        Spoofax 2.0.0 Migration Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/march2016_project_structure/" class="md-nav__link">
        Directory structure migration (March 2016)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../release/migrate/vnext/" class="md-nav__link">
        Spoofax vNext Migration Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#building-terms" class="md-nav__link">
    Building Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#matching-terms" class="md-nav__link">
    Matching Terms
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementing-rewrite-rules" class="md-nav__link">
    Implementing Rewrite Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#anonymous-rewrite-rule" class="md-nav__link">
    Anonymous Rewrite Rule
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-variable-scope" class="md-nav__link">
    Term variable scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implicit-variable-scope" class="md-nav__link">
    Implicit Variable Scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#where" class="md-nav__link">
    Where
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-rewrite-rules" class="md-nav__link">
    Conditional Rewrite Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lambda-rules" class="md-nav__link">
    Lambda Rules
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#apply-and-match" class="md-nav__link">
    Apply and Match
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#applying-strategies-in-build" class="md-nav__link">
    Applying Strategies in Build
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auxiliary-values" class="md-nav__link">
    Auxiliary Values
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assignment" class="md-nav__link">
    Assignment
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-wrap" class="md-nav__link">
    Term Wrap
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#term-project" class="md-nav__link">
    Term Project
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  



<h1 id="term-combinators">Term Combinators<a class="headerlink" href="#term-combinators" title="Permanent link">&para;</a></h1>
<p><a href="../../strategic-rewriting/term-rewriting/">Previously</a> we have presented rewrite rules as basic transformation steps.
However, rules are not atomic transformation actions.
To see this, consider what happens when the rewrite rule</p>
<div class="highlight"><pre><span></span><code><span class="nv">DAO</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class="nv">And</span><span class=" -Punctuation">(</span><span class="nv">Or</span><span class=" -Punctuation">(</span><span class="nv">x</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">y</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">z</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Or</span><span class=" -Punctuation">(</span><span class="nv">And</span><span class=" -Punctuation">(</span><span class="nv">x</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">z</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">And</span><span class=" -Punctuation">(</span><span class="nv">y</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">z</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>is applied.
First it matches the subject term against the pattern <code>And(Or(x, y), z)</code> in the left-hand side.
This means that a substitution for the variables <code>x</code>, <code>y</code>, and <code>z</code> is sought, that makes the pattern equal to the subject term.
If the match fails, the rule fails.
If the match succeeds, the pattern <code>Or(And(x, z), And(y, z))</code> on the right-hand side is instantiated with the bindings found during the match of the left-hand side.
The instantiated term then replaces the original subject term.
Furthermore, the rule limits the scope of the variables occurring in the rule.
That is, the variables <code>x</code>, <code>y</code>, <code>z</code> are local to this rule.
After the rule is applied the bindings to these variables are invisible again.</p>
<p>Thus, rather than considering rules as the atomic actions of transformation programs, Stratego provides their constituents, that is building terms from patterns and matching terms against patterns, as atomic actions, and makes these available to the programmer.
In this section we define the basic actions and their use in the composition of more complex operations such as various flavors of rewrite rules.</p>
<h2 id="building-terms">Building Terms<a class="headerlink" href="#building-terms" title="Permanent link">&para;</a></h2>
<p>The build operation <code>!p</code> replaces the subject term with the instantiation of the pattern <code>p</code> using the bindings from the environment to the variables occurring in <code>p</code>.
For example, the strategy <code>!Or(And(x, z), And(y, z))</code> replaces the subject term with the instantiation of <code>Or(And(x, z), And(y, z))</code> using bindings to variables <code>x</code>, <code>y</code> and <code>z</code>.</p>
<div class="highlight"><pre><span></span><code><span class="o">!</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;10&quot;</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;10&quot;</span><span class=" -Punctuation">)</span>
<span class="o">!</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;10&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;10&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>It is possible to build terms with variables.
We call this building a term pattern.
A pattern is a term with meta-variables.
The current term is replaced by an instantiation of pattern <code>p</code>.</p>
<p>For example, in a context where <code>e</code> is bound to <code>Var("b")</code></p>
<div class="highlight"><pre><span></span><code><span class="o">!</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">e</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<h2 id="matching-terms">Matching Terms<a class="headerlink" href="#matching-terms" title="Permanent link">&para;</a></h2>
<p>Pattern matching allows the analysis of terms.
The simplest case is matching against a literal term.
The match operation <code>?t</code> matches the subject term against the term <code>t</code>.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// succeeds</span>
<span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">))&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// fails</span>
</code></pre></div>
<p>Matching against a term pattern with variables binds those variables to (parts of) the current term.
The match strategy <code>?x</code> compares the current term (<code>t</code>) to variable <code>x</code>.
It binds variable <code>x</code> to term <code>t</code> in the environment.
A variable can only be bound once, or to the same term.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">e</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// binds e to Plus(Var(&quot;a&quot;),Int(&quot;3&quot;))</span>
<span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">e</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="o">!</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;17&quot;</span><span class=" -Punctuation">)</span><span class="w">               </span><span class="c c-Singleline">// fails</span>
</code></pre></div>
<p>The general case is matching against an arbitrary term pattern.
The match strategy <code>?p</code> compares the current term to a pattern <code>p</code>.
It will add bindings for the variables in pattern p to the environment.
The wildcard <code>_</code> in a match will match any term.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e</span><span class=" -Punctuation">,</span><span class="nv">_</span><span class=" -Punctuation">)&gt;</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// e is bound to Var(&quot;a&quot;)</span>
</code></pre></div>
<p>Patterns may be non-linear.
Multiple occurrences of the same variable can occur and each occurrence has to match the same term.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e</span><span class=" -Punctuation">,</span><span class="nv">e</span><span class=" -Punctuation">)&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// fails</span>
<span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e</span><span class=" -Punctuation">,</span><span class="nv">e</span><span class=" -Punctuation">)&gt;</span><span class="o">!</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// e is bound to Var(&quot;a&quot;)</span>
</code></pre></div>
<p>Non-linear pattern matching is a way to test equality of terms.
Indeed the equality predicates from the Stratego Library are defined using non-linear pattern matching:</p>
<div class="highlight"><pre><span></span><code><span class="nv">equal</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class="o">?</span><span class=" -Punctuation">(</span><span class="nv">x</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">x</span><span class=" -Punctuation">)</span>
<span class="nv">equal</span><span class=" -Punctuation">(|</span><span class="nv">x</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class="o">?</span><span class="nv">x</span>
</code></pre></div>
<p>The equal strategy tests whether the current term is a a pair of the same terms.
The <code>equal(|x)</code> strategy tests whether the current term is equal to the argument term.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="nv">equal</span><span class=" -Punctuation">&gt;(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">)</span><span class="w">               </span><span class="c c-Singleline">// succeeds</span>
<span class=" -Punctuation">&lt;</span><span class="nv">equal</span><span class=" -Punctuation">&gt;(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">)</span><span class="w">               </span><span class="c c-Singleline">// fails</span>
<span class=" -Punctuation">&lt;</span><span class="nv">equal</span><span class=" -Punctuation">(|</span><span class="nv">Foo</span><span class=" -Punctuation">(</span><span class="nv">Baz</span><span class=" -Punctuation">()))&gt;</span><span class="w"> </span><span class="nv">Foo</span><span class=" -Punctuation">(</span><span class="nv">Bar</span><span class=" -Punctuation">())</span><span class="w"> </span><span class="c c-Singleline">// fails</span>
<span class=" -Punctuation">&lt;</span><span class="nv">equal</span><span class=" -Punctuation">(|</span><span class="nv">Foo</span><span class=" -Punctuation">(</span><span class="nv">Bar</span><span class=" -Punctuation">()))&gt;</span><span class="w"> </span><span class="nv">Foo</span><span class=" -Punctuation">(</span><span class="nv">Bar</span><span class=" -Punctuation">())</span><span class="w"> </span><span class="c c-Singleline">// succeeds</span>
</code></pre></div>
<h2 id="implementing-rewrite-rules">Implementing Rewrite Rules<a class="headerlink" href="#implementing-rewrite-rules" title="Permanent link">&para;</a></h2>
<p>Match and build are first-class citizens in Stratego, which means that they can be used and combined just like any other strategy expressions.
In particular, we can implement rewrite rules using these operations, since a rewrite rule is basically a match followed by a build.
For example, consider the following combination of match and build:</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e2</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e1</span><span class=" -Punctuation">)&gt;</span>
<span class="w">   </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>This combination first recognizes a term, binds variables to the pattern in the match, and then replaces the current term with the instantiation of the build pattern.
Note that the variable bindings are propagated from the match to the build.</p>
<p>Stratego provides syntactic sugar for various combinations of match and build.</p>
<h2 id="anonymous-rewrite-rule">Anonymous Rewrite Rule<a class="headerlink" href="#anonymous-rewrite-rule" title="Permanent link">&para;</a></h2>
<p>An anonymous rewrite rule <code>(p1 -&gt; p2)</code> transforms a term matching <code>p1</code> into an instantiation of <code>p2</code>.
Such a rule is equivalent to the sequence <code>?p1; !p2</code>.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e1</span><span class=" -Punctuation">))&gt;</span>
<span class="w">   </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<h2 id="term-variable-scope">Term variable scope<a class="headerlink" href="#term-variable-scope" title="Permanent link">&para;</a></h2>
<p>Once a variable is bound it cannot be rebound to a different term.
Thus, when we have applied an anonymous rule once, its variables are bound and the next time it is applied it only succeeds for the same term.
For example, in the next session the second application of the rule fails, because <code>e2</code> is bound to <code>Int("3")</code> and does not match with <code>Var("b")</code>.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e1</span><span class=" -Punctuation">))&gt;</span>
<span class="w">  </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span>
<span class="w">  </span><span class="c c-Singleline">// e1 is bound to Var(&quot;a&quot;)</span>
<span class="w">  </span><span class="c c-Singleline">// e2 is bound to Int(&quot;3&quot;)</span>

<span class=" -Punctuation">&lt;(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">e1</span><span class=" -Punctuation">))&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="w"> </span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="c c-Singleline">// fails</span>
</code></pre></div>
<p>To use a variable name more than once Stratego provides term variable scope.
A scope <code>{x1,...,xn : s}</code> locally undefines the variables <code>xi</code>.
That is, the binding to a variable <code>xi</code> outside the scope is not visible inside it, nor is the binding to <code>xi</code> inside the scope visible outside it.
For example, to continue the session above, if we wrap the anonymous swap rule in a scope for its variables, it can be applied multiple times.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;{</span><span class="nv">e3</span><span class=" -Punctuation">,</span><span class="nv">e4</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e3</span><span class=" -Punctuation">,</span><span class="nv">e4</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e4</span><span class=" -Punctuation">,</span><span class="nv">e3</span><span class=" -Punctuation">))}&gt;</span>
<span class="w">   </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span>
<span class="w">   </span><span class="c c-Singleline">// e3 is not bound to a term</span>

<span class=" -Punctuation">&lt;{</span><span class="nv">e3</span><span class=" -Punctuation">,</span><span class="nv">e4</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e3</span><span class=" -Punctuation">,</span><span class="nv">e4</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e4</span><span class=" -Punctuation">,</span><span class="nv">e3</span><span class=" -Punctuation">))}&gt;</span>
<span class="w">  </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;b&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>Of course we can name such a scoped rule using a strategy definition, and then invoke it by its name:</p>
<div class="highlight"><pre><span></span><code><span class="nv">SwapArgs</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class=" -Punctuation">{</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="nv">e1</span><span class=" -Punctuation">))}</span>

<span class=" -Punctuation">&lt;</span><span class="nv">SwapArgs</span><span class=" -Punctuation">&gt;</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">),</span><span class="nv">Var</span><span class=" -Punctuation">(</span><span class="s">&quot;a&quot;</span><span class=" -Punctuation">))</span>
</code></pre></div>
<h2 id="implicit-variable-scope">Implicit Variable Scope<a class="headerlink" href="#implicit-variable-scope" title="Permanent link">&para;</a></h2>
<p>When using match and build directly in a strategy definition, rather than in the form of a rule, the definition contains free variables.
Strictly speaking such variables should be declared using a scope, that is one should write</p>
<div class="highlight"><pre><span></span><code><span class="nv">SwapArgs</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class=" -Punctuation">{</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="nv">e1</span><span class=" -Punctuation">))}</span>
</code></pre></div>
<p>However, since declaring all variables at the top of a definition is distracting and does not add much to the definition, such a scope declaration can be left out.
Thus, one can write</p>
<div class="highlight"><pre><span></span><code><span class="nv">SwapArgs</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="nv">e1</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>instead.
The scope is automatically inserted by the compiler.
This implies that there is no global scope for term variables.
Of course, variables in inner scopes should be declared where necessary.
In particular, note that variable scope is not inserted for strategy definitions in a let binding, such as</p>
<div class="highlight"><pre><span></span><code><span class="k">let</span><span class="w"> </span><span class="nv">SwapArgs</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e1</span><span class=" -Punctuation">,</span><span class="nv">e2</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">e2</span><span class=" -Punctuation">,</span><span class="nv">e1</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>...<span class="w"> </span><span class="k">end</span>
</code></pre></div>
<p>While the variables are bound in the enclosing definition, they are not restricted to <code>SwapArgs</code> in this case, since in a let you typically want to use bindings to variables in the enclosing code.</p>
<h2 id="where">Where<a class="headerlink" href="#where" title="Permanent link">&para;</a></h2>
<p>Often it is useful to apply a strategy only to test whether some property holds or to compute some auxiliary result.
For this purpose, Stratego provides the <code>where(s)</code> combinator, which applies <code>s</code> to the current term, but restores that term afterwards.
Any bindings to variables are kept, however.</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="k">where</span><span class=" -Punctuation">(</span><span class="o">?</span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">));</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">addS</span><span class=" -Punctuation">&gt;(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">k</span><span class=" -Punctuation">)&gt;</span>
<span class="w">   </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;14&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;14&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span>
<span class="w">   </span><span class="c c-Singleline">// i is bound to &quot;14&quot;</span>
<span class="w">   </span><span class="c c-Singleline">// k is bound to &quot;17&quot;</span>
</code></pre></div>
<p>With the match and build constructs <code>where(s)</code> is in fact just syntactic sugar for <code>{x: ?x; s; !x}</code> with <code>x</code> a fresh variable not occurring in <code>s</code>.
Thus, the current subject term is saved by binding it to a new variable <code>x</code>, then the strategy <code>s</code> is applied, and finally, the original term is restored by building <code>x</code>.</p>
<h2 id="conditional-rewrite-rules">Conditional Rewrite Rules<a class="headerlink" href="#conditional-rewrite-rules" title="Permanent link">&para;</a></h2>
<p>A simple rewrite rule succeeds if the match of the left-hand side succeeds.
Sometimes it is useful to place additional requirements on the application of a rule, or to compute some value for use in the right-hand side of the rule.
This can be achieved with conditional rewrite rules.
A conditional rule <code>L: p1 -&gt; p2</code> where <code>s</code> is a simple rule extended with an additional computation <code>s</code> which should succeed in order for the rule to apply.
The condition can be used to test properties of terms in the left-hand side, or to compute terms to be used in the right-hand side.
The latter is done by binding such new terms to variables used in the right-hand side.</p>
<p>For example, the <code>EvalPlus</code> rule in the following session uses a condition to compute the sum of <code>i</code> and <code>j</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="o">!</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="nv">addS</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="o">?</span><span class="nv">k</span>

<span class=" -Punctuation">&lt;</span><span class="nv">EvalPlus</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Plus</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;14&quot;</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;3&quot;</span><span class=" -Punctuation">))</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="s">&quot;17&quot;</span><span class=" -Punctuation">)</span>
</code></pre></div>
<p>A conditional rule can be desugared similarly to an unconditional rule.
That is, a conditional rule of the form</p>
<div class="highlight"><pre><span></span><code><span class="nv">L</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">p2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="nv">s</span>
</code></pre></div>
<p>is syntactic sugar for</p>
<div class="highlight"><pre><span></span><code><span class="nv">L</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class="o">?</span><span class="nv">p1</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="k">where</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">p2</span>
</code></pre></div>
<p>Thus, after the match with <code>p1</code> succeeds the strategy <code>s</code> is applied to the subject term.
Only if the application of <code>s</code> succeeds, is the right-hand side <code>p2</code> built.
Note that since <code>s</code> is applied within a where, the build <code>!p2</code> is applied to the original subject term; only variable bindings computed within <code>s</code> can be used in <code>p2</code>.</p>
<p>As an example, consider the following constant folding rule, which reduces an addition of two integer constants to the constant obtained by computing the addition.</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="o">!</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="nv">addS</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="o">?</span><span class="nv">k</span>
</code></pre></div>
<p>The addition is computed by applying the primitive strategy addS to the pair of integers <code>(i,j)</code> and matching the result against the variable <code>k</code>, which is then used in the right-hand side.
This rule is desugared to</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class="o">?</span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">));</span><span class="w"> </span><span class="k">where</span><span class=" -Punctuation">(</span><span class="o">!</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="nv">addS</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="o">?</span><span class="nv">k</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
</code></pre></div>
<h2 id="lambda-rules">Lambda Rules<a class="headerlink" href="#lambda-rules" title="Permanent link">&para;</a></h2>
<p>Sometimes it is useful to define a rule anonymously within a strategy expression.
The syntax for anonymous rules with scopes is a bit much since it requires enumerating all variables.
A lambda rule of the form</p>
<div class="highlight"><pre><span></span><code>\<span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">p2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span>\
</code></pre></div>
<p>is an anonymous rewrite rule for which the variables in the left-hand side <code>p1</code> are local to the rule, that is, it is equivalent to an expression of the form</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">{</span><span class="nv">x1</span><span class=" -Punctuation">,</span>...<span class=" -Punctuation">,</span><span class="nv">xn</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">p1</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">p2</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="nv">s</span><span class=" -Punctuation">)}</span>
</code></pre></div>
<p>with <code>x1</code>,…,<code>xn</code> the variables of <code>p1</code>.
This means that any variables used in <code>s</code> and <code>p2</code> that do not occur in <code>p1</code> are bound in the context of the rule.</p>
<p>A typical example of the use of an anonymous rule is</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="nv">map</span><span class=" -Punctuation">(</span>\<span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">x</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">y</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span>\<span class="w"> </span><span class=" -Punctuation">)&gt;</span><span class="w"> </span><span class=" -Punctuation">[(</span><span class="m">1</span><span class=" -Punctuation">,</span><span class="m">2</span><span class=" -Punctuation">),(</span><span class="m">3</span><span class=" -Punctuation">,</span><span class="m">4</span><span class=" -Punctuation">),(</span><span class="m">5</span><span class=" -Punctuation">,</span><span class="m">6</span><span class=" -Punctuation">)]</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class=" -Punctuation">[</span><span class="m">1</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">,</span><span class="m">5</span><span class=" -Punctuation">]</span>
</code></pre></div>
<h2 id="apply-and-match">Apply and Match<a class="headerlink" href="#apply-and-match" title="Permanent link">&para;</a></h2>
<p>One frequently occuring scenario is that of applying a strategy to a term and then matching the result against a pattern.
This typically occurs in the condition of a rule.
In the constant folding example above we saw this scenario:</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">where</span><span class="w"> </span><span class="o">!</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="nv">addS</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="o">?</span><span class="nv">k</span>
</code></pre></div>
<p>In the condition, first the term <code>(i,j)</code> is built, then the strategy <code>addS</code> is applied to it, and finally the result is matched against the pattern <code>k</code>.</p>
<p>To improve the readability of such expressions, the following two constructs are provided.
The operation <code>&lt;s&gt; p</code> captures the notion of applying a strategy to a term, i.e., the scenario <code>!p; s</code>.
The operation <code>s =&gt; p</code> capture the notion of applying a strategy to the current subject term and then matching the result against the pattern <code>p</code>, i.e., <code>s; ?p</code>.
The combined operation <code>&lt;s&gt; p1 =&gt; p2</code> thus captures the notion of applying a strategy to a term <code>p1</code> and matching the result against <code>p2</code>, i.e, <code>!p1; s; ?p2</code>.
Using this notation we can improve the constant folding rule above as</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">where</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">addS</span><span class=" -Punctuation">&gt;(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">k</span>
</code></pre></div>
<h2 id="applying-strategies-in-build">Applying Strategies in Build<a class="headerlink" href="#applying-strategies-in-build" title="Permanent link">&para;</a></h2>
<p>Sometimes it useful to apply a strategy directly to a subterm of a pattern, for example in the right-hand side of a rule, instead of computing a value in a condition, binding the result to a variable, and then using the variable in the build pattern.
The constant folding rule above, for example, could be further simplified by directly applying the addition in the right-hand side:</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(&lt;</span><span class="nv">addS</span><span class=" -Punctuation">&gt;(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>This abbreviates the conditional rule above.
In general, a strategy application in a build pattern can always be expressed by computing the application before the build and binding the result to a new variable, which then replaces the application in the build pattern.</p>
<p>Another example is the following definition of the map(s) strategy, which applies a strategy to each term in a list:</p>
<div class="highlight"><pre><span></span><code><span class="nv">map</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">[]</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class=" -Punctuation">[]</span>
<span class="nv">map</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class=" -Punctuation">[</span><span class="nv">x</span><span class="w"> </span><span class=" -Punctuation">|</span><span class="w"> </span><span class="nv">xs</span><span class=" -Punctuation">]</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class=" -Punctuation">[&lt;</span><span class="nv">s</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class=" -Punctuation">|</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">map</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class=" -Punctuation">)&gt;</span><span class="w"> </span><span class="nv">xs</span><span class=" -Punctuation">]</span>
</code></pre></div>
<h2 id="auxiliary-values">Auxiliary Values<a class="headerlink" href="#auxiliary-values" title="Permanent link">&para;</a></h2>
<p>As mentioned above, it can be convenient to apply a strategy only to compute some auxiliary result.
Although the <code>where</code> construct created to constrain when a rule or strategy may apply (as covered above) can be used for this purpose, often it is better to use the <code>with</code> strategy specifically designed with computing auxiliaries in mind.</p>
<p>Specifically, if <code>s</code> is any strategy, the strategy <code>with(s)</code> executes <code>s</code> on the current subject term and then restores the current subject term.
In other words, <code>s</code> is executed solely for its side effects, such as binding variables.
In this respect, with is like <code>where</code>.
However, <code>with(s)</code> differs in a key way: if the strategy <code>s</code> fails, Stratego immediately stops with an error, reporting the strategy that failed.
Thus, if <code>with(s)</code> is used for auxiliary computations that really should not fail if the transformation is proceeding properly, there is no opportunity for Stratego to backtrack and/or continue applying other strategies, potentially creating an error at a point far removed from the place that things actually went awry.
In short, using <code>with(s)</code> instead of <code>where(s)</code> any time the intention is not to constrain the applicability of a rule or strategy generally makes debugging your Stratego program significantly easier.</p>
<p>Also as with <code>where</code>, we can add a <code>with</code> clause to a rewrite rule in exactly the same way.
In other words,</p>
<div class="highlight"><pre><span></span><code><span class="nv">L</span><span class="w"> </span><span class=" -Punctuation">:</span><span class="w"> </span><span class="nv">p1</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">p2</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nv">s</span>
</code></pre></div>
<p>is syntactic sugar for</p>
<div class="highlight"><pre><span></span><code><span class="nv">L</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class="o">?</span><span class="nv">p1</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="k">with</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">p2</span>
</code></pre></div>
<p>So as an example, the <code>where</code> version of <code>EvalPlus</code> above would be better cast as</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">with</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">addS</span><span class=" -Punctuation">&gt;(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">k</span>
</code></pre></div>
<p>because after all, there is no chance that Stratego will be unable to add two integers, and so if the contents of the <code>with</code> clause fails it means something has gone wrong – perhaps an <code>Int</code> term somehow ended up with a parameter that does not actually represent an integer – and Stratego should quit now.</p>
<h2 id="assignment">Assignment<a class="headerlink" href="#assignment" title="Permanent link">&para;</a></h2>
<p>The assignment combinator <code>:=</code> is a variation of apply-and-match with terms on both sides of the assignment.
The strategy <code>p1 := p2</code> builds <code>p2</code> and matches the result against <code>p1</code>, i.e. it is syntactic sugar for <code>!p2; ?p1</code>.
The strategy is often combine with strategy application into <code>p1 := &lt;s&gt;p2</code>, which is equivalent to <code>&lt;s&gt;p2 =&gt; p1</code>, but more familiar to an audience with an imperative mindset.</p>
<p>For example, consider the following rewrite rule</p>
<div class="highlight"><pre><span></span><code><span class="nv">EvalPlus</span><span class="w"> </span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class="nv">Add</span><span class=" -Punctuation">(</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">i</span><span class=" -Punctuation">),</span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">j</span><span class=" -Punctuation">))</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">Int</span><span class=" -Punctuation">(</span><span class="nv">k</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="nv">k</span><span class="w"> </span><span class=" -Punctuation">:=</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">addS</span><span class=" -Punctuation">&gt;(</span><span class="nv">i</span><span class=" -Punctuation">,</span><span class="nv">j</span><span class=" -Punctuation">)</span>
</code></pre></div>
<!-- To sum up, we have actually already seen an example of both `with` and `:=` in the “glue” strategy used to run a Stratego transformation via Editor Services:

<div class="highlight"><pre><span></span><code><span class="nv">do-eval</span><span class=" -Punctuation">:</span>
<span class="w">  </span><span class=" -Punctuation">(</span><span class="nv">selected</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">_</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">_</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">path</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">project-path</span><span class=" -Punctuation">)</span><span class="w"> </span><span class="nv">-</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="nv">filename</span><span class=" -Punctuation">,</span><span class="w"> </span><span class="nv">result</span><span class=" -Punctuation">)</span>
<span class="w">  </span><span class="k">with</span><span class="w"> </span><span class="nv">filename</span><span class="w"> </span><span class=" -Punctuation">:=</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">guarantee-extension</span><span class=" -Punctuation">(|</span><span class="s">&quot;eval.aterm&quot;</span><span class=" -Punctuation">)&gt;</span><span class="w"> </span><span class="nv">path</span>
<span class="w">     </span><span class=" -Punctuation">;</span><span class="w"> </span><span class="nv">result</span><span class="w">   </span><span class=" -Punctuation">:=</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">eval</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">selected</span>
</code></pre></div>

To make the operation of this rule clearer, the two components of the outcome are separated into auxiliary computations in the `with` clause, and these two auxiliaries are implemented as assignments with the `:=` operator.
Moreover, if either the eval strategy fails or if Stratego is unable to compute the proper output filename, there is no point in continuing.
So Stratego will simply terminate immediately and report the error. -->

<!-- ## Wrap and Project

Term wrapping and projection are concise idioms for constructing terms that wrap the current term and for extracting subterms from the current term. -->

<h2 id="term-wrap">Term Wrap<a class="headerlink" href="#term-wrap" title="Permanent link">&para;</a></h2>
<p>One often write rules of the form <code>x -&gt; Foo(Bar(x))</code>, i.e. wrapping a term pattern around the current term.
Using rule syntax this is quite verbose.
The syntactic abstraction of term wraps, allows the concise specification of such little transformations as <code>!Foo(Bar(&lt;id&gt;))</code>.</p>
<p>In general, a term wrap is a build strategy <code>!p[&lt;s&gt;]</code> containing one or more strategy applications <code>&lt;s&gt;</code> that are not applied to a term.
When executing the the build operation, each occurrence of such a strategy application <code>&lt;s&gt;</code> is replaced with the term resulting from applying <code>s</code> to the current subject term, i.e., the one that is being replaced by the build.
The following applications illustrate some uses of term wraps:</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">!</span><span class=" -Punctuation">(&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;,&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;)&gt;</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="m">3</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">)</span>

<span class=" -Punctuation">&lt;(&lt;</span><span class="nv">Fst</span><span class=" -Punctuation">;</span><span class="w"> </span><span class="nv">inc</span><span class=" -Punctuation">&gt;,&lt;</span><span class="nv">Snd</span><span class=" -Punctuation">&gt;)&gt;</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="m">3</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">)</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class=" -Punctuation">(</span><span class="m">4</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">)</span>

<span class=" -Punctuation">&lt;</span><span class="o">!</span><span class="nv">Call</span><span class=" -Punctuation">(&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;,</span><span class="w"> </span><span class=" -Punctuation">[])&gt;</span><span class="w"> </span><span class="s">&quot;foobar&quot;</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">Call</span><span class=" -Punctuation">(</span><span class="s">&quot;foobar&quot;</span><span class=" -Punctuation">,</span><span class="w"> </span><span class=" -Punctuation">[])</span>

<span class="nv">mod2</span><span class="w"> </span><span class=" -Punctuation">=</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">mod</span><span class=" -Punctuation">&gt;(&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;,</span><span class="m">2</span><span class=" -Punctuation">)</span>

<span class=" -Punctuation">&lt;</span><span class="nv">mod2</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="m">0</span>
</code></pre></div>
<p>As should now be a common pattern, term projects are implemented by translation to a combination of match and build expressions.
Thus, a term wrap <code>!p[&lt;s&gt;]</code> is translated to a strategy expression</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">{</span><span class="nv">x</span><span class=" -Punctuation">:</span><span class="w"> </span><span class="k">where</span><span class=" -Punctuation">(</span><span class="nv">s</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">x</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">p</span><span class=" -Punctuation">[</span><span class="nv">x</span><span class=" -Punctuation">]}</span>
</code></pre></div>
<p>where <code>x</code> is a fresh variable not occurring in <code>s</code>.
In other words, the strategy <code>s</code> is applied to the current subject term, i.e., the term to which the build is applied.</p>
<p>As an example, the term wrap <code>!Foo(Bar(&lt;id&gt;))</code> is desugared to the strategy</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">{</span><span class="nv">x</span><span class=" -Punctuation">:</span><span class="w"> </span><span class="k">where</span><span class=" -Punctuation">(</span><span class="nv">id</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class="nv">x</span><span class=" -Punctuation">);</span><span class="w"> </span><span class="o">!</span><span class="nv">Foo</span><span class=" -Punctuation">(</span><span class="nv">Bar</span><span class=" -Punctuation">(</span><span class="nv">x</span><span class=" -Punctuation">))}</span>
</code></pre></div>
<p>which after simplification is equivalent to <code>{x: ?x; !Foo(Bar(x))}</code>, i.e., exactly the original lambda rule <code>\x -&gt; Foo(Bar(x))\</code>.</p>
<h2 id="term-project">Term Project<a class="headerlink" href="#term-project" title="Permanent link">&para;</a></h2>
<p>Term projections are the match dual of term wraps.
Term projections can be used to project a subterm from a term pattern.
For example, the expression <code>?And(&lt;id&gt;,x)</code> matches terms of the form <code>And(t1,t2)</code> and reduces them to the first subterm <code>t1</code>.
Another example is the strategy</p>
<div class="highlight"><pre><span></span><code><span class="nv">map</span><span class=" -Punctuation">(</span><span class="o">?</span><span class="nv">FunDec</span><span class=" -Punctuation">(&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;,</span><span class="nv">_</span><span class=" -Punctuation">,</span><span class="nv">_</span><span class=" -Punctuation">))</span>
</code></pre></div>
<p>which reduces a list of function declarations to a list of the names of the functions, i.e., the first arguments of the <code>FunDec</code> constructor.
Here are some more examples:</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">&lt;</span><span class="o">?</span><span class=" -Punctuation">[</span><span class="nv">_</span><span class=" -Punctuation">|&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;]&gt;</span><span class="w"> </span><span class=" -Punctuation">[</span><span class="m">1</span><span class=" -Punctuation">,</span><span class="m">2</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">]</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w"> </span><span class=" -Punctuation">[</span><span class="m">2</span><span class=" -Punctuation">,</span><span class="m">3</span><span class=" -Punctuation">]</span>

<span class=" -Punctuation">&lt;</span><span class="o">?</span><span class="nv">Call</span><span class=" -Punctuation">(&lt;</span><span class="nv">id</span><span class=" -Punctuation">&gt;,</span><span class="w"> </span><span class=" -Punctuation">[])&gt;</span><span class="w"> </span><span class="nv">Call</span><span class=" -Punctuation">(</span><span class="s">&quot;foobar&quot;</span><span class=" -Punctuation">,</span><span class="w"> </span><span class=" -Punctuation">[])</span><span class="w"> </span><span class=" -Punctuation">=&gt;</span><span class="w">  </span><span class="s">&quot;foobar&quot;</span>
</code></pre></div>
<p>Term projections can also be used to apply additional constraints to subterms in a match pattern.
For example, <code>?Call(x, &lt;?args; length =&gt; 3&gt;)</code> matches only with function calls with three arguments.</p>
<p>A match expression <code>?p[&lt;s&gt;]</code> is desugared as</p>
<div class="highlight"><pre><span></span><code><span class=" -Punctuation">{</span><span class="nv">x</span><span class=" -Punctuation">:</span><span class="w"> </span><span class="o">?</span><span class="nv">p</span><span class=" -Punctuation">[</span><span class="nv">x</span><span class=" -Punctuation">];</span><span class="w"> </span><span class=" -Punctuation">&lt;</span><span class="nv">s</span><span class=" -Punctuation">&gt;</span><span class="w"> </span><span class="nv">x</span><span class=" -Punctuation">}</span>
</code></pre></div>
<p>That is, after the pattern <code>p[x]</code> matches, it is reduced to the subterm bound to <code>x</code> to which s is applied.
The result is also the result of the projection.
When multiple projects are used within a match the outcome is undefined, i.e., the order in which the projects will be performed can not be counted on.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2023-01-16
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2010-2023 Spoofax Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.tabs", "navigation.top", "navigation.indexes"], "search": "../../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
        <script src="../../../../assets/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>